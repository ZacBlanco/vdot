
let paces = {"VDOT":{"0":30,"1":31,"2":32,"3":33,"4":34,"5":35,"6":36,"7":37,"8":38,"9":39,"10":40,"11":41,"12":42,"13":43,"14":44,"15":45,"16":46,"17":47,"18":48,"19":49,"20":50,"21":51,"22":52,"23":53,"24":54,"25":55,"26":56,"27":57,"28":58,"29":59,"30":60,"31":61,"32":62,"33":63,"34":64,"35":65,"36":66,"37":67,"38":68,"39":69,"40":70,"41":71,"42":72,"43":73,"44":74,"45":75,"46":76,"47":77,"48":78,"49":79,"50":80,"51":81,"52":82,"53":83,"54":84,"55":85},"E\/km":{"0":472000,"1":461000,"2":450000,"3":440000,"4":430000,"5":421000,"6":412000,"7":403000,"8":395000,"9":387000,"10":379000,"11":372000,"12":365000,"13":358000,"14":352000,"15":346000,"16":340000,"17":334000,"18":328000,"19":323000,"20":318000,"21":313000,"22":308000,"23":304000,"24":299000,"25":295000,"26":290000,"27":286000,"28":282000,"29":278000,"30":275000,"31":271000,"32":267000,"33":264000,"34":261000,"35":258000,"36":254000,"37":251000,"38":248000,"39":245000,"40":242000,"41":240000,"42":237000,"43":234000,"44":232000,"45":229000,"46":227000,"47":224000,"48":222000,"49":220000,"50":218000,"51":215000,"52":213000,"53":211000,"54":209000,"55":207000},"E\/mile":{"0":760000,"1":742000,"2":724000,"3":708000,"4":692000,"5":677000,"6":662000,"7":649000,"8":635000,"9":623000,"10":611000,"11":599000,"12":588000,"13":577000,"14":567000,"15":557000,"16":547000,"17":538000,"18":529000,"19":520000,"20":512000,"21":504000,"22":496000,"23":489000,"24":481000,"25":474000,"26":468000,"27":461000,"28":454000,"29":448000,"30":442000,"31":436000,"32":431000,"33":425000,"34":420000,"35":414000,"36":409000,"37":404000,"38":399000,"39":395000,"40":390000,"41":386000,"42":381000,"43":377000,"44":373000,"45":369000,"46":365000,"47":361000,"48":357000,"49":354000,"50":350000,"51":346000,"52":343000,"53":340000,"54":336000,"55":333000},"M\/km":{"0":423000,"1":412000,"2":400000,"3":390000,"4":380000,"5":370000,"6":361000,"7":353000,"8":345000,"9":337000,"10":329000,"11":322000,"12":316000,"13":309000,"14":303000,"15":297000,"16":291000,"17":286000,"18":281000,"19":266000,"20":271000,"21":267000,"22":262000,"23":258000,"24":254000,"25":250000,"26":246000,"27":243000,"28":239000,"29":239000,"30":232000,"31":229000,"32":226000,"33":223000,"34":220000,"35":217000,"36":214000,"37":211000,"38":209000,"39":206000,"40":204000,"41":201000,"42":199000,"43":196000,"44":194000,"45":192000,"46":190000,"47":188000,"48":186000,"49":183000,"50":181000,"51":180000,"52":178000,"53":176000,"54":174000,"55":172000},"M\/mile":{"0":681000,"1":662000,"2":644000,"3":627000,"4":611000,"5":596000,"6":581000,"7":568000,"8":555000,"9":542000,"10":530000,"11":519000,"12":508000,"13":497000,"14":487000,"15":478000,"16":469000,"17":460000,"18":452000,"19":444000,"20":437000,"21":429000,"22":422000,"23":416000,"24":409000,"25":403000,"26":397000,"27":391000,"28":385000,"29":379000,"30":374000,"31":369000,"32":364000,"33":359000,"34":354000,"35":349000,"36":345000,"37":340000,"38":336000,"39":332000,"40":328000,"41":324000,"42":320000,"43":316000,"44":312000,"45":309000,"46":305000,"47":301000,"48":298000,"49":295000,"50":292000,"51":289000,"52":286000,"53":283000,"54":280000,"55":277000},"T\/400":{"0":153000,"1":150000,"2":146000,"3":143000,"4":139000,"5":136000,"6":133000,"7":130000,"8":127000,"9":125000,"10":122000,"11":120000,"12":117000,"13":115000,"14":113000,"15":111000,"16":109000,"17":107000,"18":105000,"19":103000,"20":102000,"21":100000,"22":98000,"23":97000,"24":95000,"25":94000,"26":93000,"27":91000,"28":90000,"29":89000,"30":88000,"31":86000,"32":85000,"33":84000,"34":83000,"35":82000,"36":81000,"37":80000,"38":79000,"39":78000,"40":77000,"41":76000,"42":76000,"43":75000,"44":74000,"45":74000,"46":73000,"47":72000,"48":71000,"49":70000,"50":70000,"51":69000,"52":68000,"53":68000,"54":67000,"55":66000},"T\/800":{"0":307000,"1":299000,"2":292000,"3":285000,"4":278000,"5":272000,"6":266000,"7":260000,"8":255000,"9":250000,"10":245000,"11":240000,"12":235000,"13":231000,"14":226000,"15":222000,"16":218000,"17":215000,"18":211000,"19":208000,"20":204000,"21":201000,"22":197000,"23":195000,"24":192000,"25":189000,"26":186000,"27":184000,"28":180000,"29":178000,"30":176000,"31":173000,"32":171000,"33":169000,"34":167000,"35":165000,"36":163000,"37":161000,"38":159000,"39":157000,"40":155000,"41":153000,"42":152000,"43":150000,"44":149000,"45":147000,"46":146000,"47":144000,"48":142000,"49":141000,"50":139000,"51":138000,"52":137000,"53":135000,"54":134000,"55":133000},"T\/1000":{"0":384000,"1":374000,"2":365000,"3":356000,"4":348000,"5":340000,"6":333000,"7":325000,"8":319000,"9":312000,"10":306000,"11":300000,"12":294000,"13":289000,"14":283000,"15":278000,"16":273000,"17":269000,"18":264000,"19":260000,"20":255000,"21":251000,"22":247000,"23":244000,"24":240000,"25":236000,"26":233000,"27":230000,"28":225000,"29":223000,"30":220000,"31":217000,"32":214000,"33":212000,"34":209000,"35":206000,"36":204000,"37":201000,"38":199000,"39":196000,"40":194000,"41":192000,"42":190000,"43":188000,"44":186000,"45":184000,"46":182000,"47":180000,"48":178000,"49":176000,"50":174000,"51":173000,"52":171000,"53":169000,"54":168000,"55":166000},"T\/mile":{"0":618000,"1":602000,"2":587000,"3":573000,"4":560000,"5":547000,"6":535000,"7":524000,"8":513000,"9":502000,"10":492000,"11":482000,"12":472000,"13":462000,"14":453000,"15":445000,"16":437000,"17":429000,"18":422000,"19":416000,"20":410000,"21":404000,"22":398000,"23":392000,"24":386000,"25":380000,"26":375000,"27":369000,"28":364000,"29":359000,"30":354000,"31":350000,"32":345000,"33":341000,"34":336000,"35":332000,"36":328000,"37":324000,"38":320000,"39":316000,"40":313000,"41":309000,"42":305000,"43":302000,"44":299000,"45":296000,"46":292000,"47":289000,"48":286000,"49":283000,"50":281000,"51":278000,"52":275000,"53":272000,"54":270000,"55":267000},"I\/400":{"0":142000,"1":138000,"2":134000,"3":131000,"4":128000,"5":125000,"6":122000,"7":119000,"8":116000,"9":114000,"10":112000,"11":110000,"12":108000,"13":106000,"14":104000,"15":102000,"16":100000,"17":98000,"18":96000,"19":95000,"20":93000,"21":92000,"22":91000,"23":90000,"24":88000,"25":87000,"26":86000,"27":85000,"28":83000,"29":82000,"30":81000,"31":80000,"32":79000,"33":78000,"34":77000,"35":76000,"36":75000,"37":74000,"38":73000,"39":72000,"40":71000,"41":70000,"42":69000,"43":69000,"44":68000,"45":67000,"46":66000,"47":65000,"48":65000,"49":64000,"50":64000,"51":63000,"52":62000,"53":62000,"54":61000,"55":61000},"I\/1000":{"0":null,"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null,"8":294000.0,"9":288000.0,"10":282000.0,"11":276000.0,"12":271000.0,"13":266000.0,"14":261000.0,"15":256000.0,"16":252000.0,"17":247000.0,"18":243000.0,"19":239000.0,"20":235000.0,"21":231000.0,"22":228000.0,"23":224000.0,"24":221000.0,"25":217000.0,"26":214000.0,"27":211000.0,"28":208000.0,"29":205000.0,"30":203000.0,"31":200000.0,"32":197000.0,"33":195000.0,"34":192000.0,"35":190000.0,"36":188000.0,"37":185000.0,"38":183000.0,"39":181000.0,"40":179000.0,"41":177000.0,"42":175000.0,"43":173000.0,"44":171000.0,"45":169000.0,"46":168000.0,"47":166000.0,"48":164000.0,"49":162000.0,"50":161000.0,"51":159000.0,"52":158000.0,"53":156000.0,"54":155000.0,"55":153000.0},"I\/1200":{"0":null,"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null,"8":null,"9":null,"10":null,"11":null,"12":null,"13":null,"14":null,"15":null,"16":300000.0,"17":294000.0,"18":289000.0,"19":285000.0,"20":281000.0,"21":276000.0,"22":273000.0,"23":269000.0,"24":265000.0,"25":261000.0,"26":258000.0,"27":255000.0,"28":250000.0,"29":247000.0,"30":243000.0,"31":240000.0,"32":237000.0,"33":234000.0,"34":231000.0,"35":228000.0,"36":225000.0,"37":222000.0,"38":219000.0,"39":216000.0,"40":214000.0,"41":211000.0,"42":209000.0,"43":207000.0,"44":205000.0,"45":202000.0,"46":200000.0,"47":198000.0,"48":196000.0,"49":194000.0,"50":192000.0,"51":190000.0,"52":188000.0,"53":187000.0,"54":185000.0,"55":183000.0},"I\/mile":{"0":null,"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null,"8":null,"9":null,"10":null,"11":null,"12":null,"13":null,"14":null,"15":null,"16":null,"17":null,"18":null,"19":null,"20":null,"21":null,"22":null,"23":null,"24":null,"25":null,"26":null,"27":null,"28":null,"29":null,"30":null,"31":null,"32":null,"33":null,"34":null,"35":null,"36":300000.0,"37":297000.0,"38":293000.0,"39":290000.0,"40":286000.0,"41":283000.0,"42":280000.0,"43":277000.0,"44":274000.0,"45":271000.0,"46":268000.0,"47":265000.0,"48":263000.0,"49":260000.0,"50":257000.0,"51":255000.0,"52":252000.0,"53":250000.0,"54":248000.0,"55":245000.0},"R\/200":{"0":67000,"1":65000,"2":63000,"3":61000,"4":60000,"5":58000,"6":57000,"7":55000,"8":54000,"9":53000,"10":52000,"11":51000,"12":50000,"13":49000,"14":48000,"15":47000,"16":46000,"17":45000,"18":44000,"19":44000,"20":43000,"21":43000,"22":42000,"23":42000,"24":41000,"25":40000,"26":40000,"27":39000,"28":38000,"29":38000,"30":37000,"31":37000,"32":36000,"33":36000,"34":35000,"35":35000,"36":34000,"37":34000,"38":33000,"39":33000,"40":32000,"41":32000,"42":31000,"43":31000,"44":31000,"45":30000,"46":30000,"47":29000,"48":29000,"49":29000,"50":29000,"51":28000,"52":28000,"53":28000,"54":27000,"55":27000},"R\/300":{"0":101000,"1":98000,"2":95000,"3":92000,"4":90000,"5":87000,"6":85000,"7":83000,"8":81000,"9":80000,"10":78000,"11":77000,"12":75000,"13":74000,"14":72000,"15":71000,"16":69000,"17":68000,"18":67000,"19":66000,"20":65000,"21":64000,"22":64000,"23":63000,"24":62000,"25":61000,"26":60000,"27":59000,"28":58000,"29":57000,"30":56000,"31":55000,"32":54000,"33":53000,"34":52000,"35":52000,"36":51000,"37":51000,"38":50000,"39":49000,"40":48000,"41":48000,"42":47000,"43":47000,"44":46000,"45":46000,"46":45000,"47":45000,"48":44000,"49":44000,"50":43000,"51":43000,"52":42000,"53":42000,"54":41000,"55":41000},"R\/400":{"0":null,"1":null,"2":null,"3":null,"4":120000.0,"5":119000.0,"6":115000.0,"7":113000.0,"8":110000.0,"9":108000.0,"10":106000.0,"11":104000.0,"12":102000.0,"13":100000.0,"14":98000.0,"15":96000.0,"16":94000.0,"17":92000.0,"18":90000.0,"19":89000.0,"20":87000.0,"21":86000.0,"22":85000.0,"23":84000.0,"24":82000.0,"25":81000.0,"26":80000.0,"27":79000.0,"28":77000.0,"29":76000.0,"30":75000.0,"31":74000.0,"32":73000.0,"33":72000.0,"34":71000.0,"35":70000.0,"36":69000.0,"37":68000.0,"38":67000.0,"39":66000.0,"40":65000.0,"41":64000.0,"42":63000.0,"43":62000.0,"44":62000.0,"45":61000.0,"46":60000.0,"47":59000.0,"48":59000.0,"49":58000.0,"50":58000.0,"51":57000.0,"52":56000.0,"53":56000.0,"54":55000.0,"55":55000.0},"R\/600":{"0":null,"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null,"8":null,"9":null,"10":null,"11":null,"12":null,"13":null,"14":null,"15":null,"16":null,"17":null,"18":null,"19":null,"20":null,"21":null,"22":null,"23":null,"24":null,"25":null,"26":120000.0,"27":117000.0,"28":114000.0,"29":111000.0,"30":108000.0,"31":106000.0,"32":104000.0,"33":102000.0,"34":100000.0,"35":98000.0,"36":96000.0,"37":94000.0,"38":92000.0,"39":90000.0,"40":89000.0,"41":88000.0,"42":87000.0,"43":86000.0,"44":85000.0,"45":84000.0,"46":82000.0,"47":81000.0,"48":80000.0,"49":79000.0,"50":78000.0,"51":77000.0,"52":76000.0,"53":75000.0,"54":74000.0,"55":73000.0},"R\/800":{"0":null,"1":null,"2":null,"3":null,"4":null,"5":null,"6":null,"7":null,"8":null,"9":null,"10":null,"11":null,"12":null,"13":null,"14":null,"15":null,"16":null,"17":null,"18":null,"19":null,"20":null,"21":null,"22":null,"23":null,"24":null,"25":null,"26":null,"27":null,"28":null,"29":null,"30":null,"31":null,"32":null,"33":null,"34":null,"35":null,"36":null,"37":null,"38":null,"39":null,"40":null,"41":null,"42":null,"43":null,"44":null,"45":null,"46":null,"47":120000.0,"48":119000.0,"49":118000.0,"50":116000.0,"51":115000.0,"52":114000.0,"53":113000.0,"54":112000.0,"55":111000.0}}

let races = {"VDOT":{"0":85,"1":84,"2":83,"3":82,"4":81,"5":80,"6":79,"7":78,"8":77,"9":76,"10":75,"11":74,"12":73,"13":72,"14":71,"15":70,"16":69,"17":68,"18":67,"19":66,"20":65,"21":64,"22":63,"23":62,"24":61,"25":60,"26":59,"27":58,"28":57,"29":56,"30":55,"31":54,"32":53,"33":52,"34":51,"35":50,"36":49,"37":48,"38":47,"39":46,"40":45,"41":44,"42":43,"43":42,"44":41,"45":40,"46":39,"47":38,"48":37,"49":36,"50":35,"51":34,"52":33,"53":32,"54":31,"55":30},"1500":{"0":203005,"1":205005,"2":207006,"3":209007,"4":211009,"5":214002,"6":216005,"7":218008,"8":221000,"9":224000,"10":226000,"11":229000,"12":232000,"13":234000,"14":237000,"15":240000,"16":243000,"17":246000,"18":250000,"19":253000,"20":256000,"21":260000,"22":264000,"23":267000,"24":271000,"25":275000,"26":279000,"27":284000,"28":288000,"29":293000,"30":297000,"31":302000,"32":307000,"33":313000,"34":318000,"35":324000,"36":330000,"37":336000,"38":342000,"39":349000,"40":356000,"41":363000,"42":371000,"43":379000,"44":387000,"45":395000,"46":404000,"47":414000,"48":424000,"49":434000,"50":445000,"51":457000,"52":469000,"53":482000,"54":495000,"55":510000},"1609":{"0":219006,"1":221008,"2":224001,"3":226004,"4":228007,"5":231002,"6":233007,"7":236002,"8":238000,"9":242000,"10":244000,"11":247000,"12":250000,"13":253000,"14":256000,"15":259000,"16":263000,"17":266000,"18":270000,"19":273000,"20":277000,"21":281000,"22":285000,"23":289000,"24":293000,"25":297000,"26":302000,"27":306000,"28":311000,"29":316000,"30":321000,"31":327000,"32":332000,"33":338000,"34":344000,"35":350000,"36":356000,"37":363000,"38":370000,"39":377000,"40":385000,"41":392000,"42":401000,"43":409000,"44":418000,"45":427000,"46":437000,"47":447000,"48":458000,"49":469000,"50":481000,"51":494000,"52":507000,"53":521000,"54":535000,"55":551000},"3000":{"0":434001,"1":438005,"2":443001,"3":447008,"4":452005,"5":457005,"6":463000,"7":468000,"8":473000,"9":478000,"10":484000,"11":490000,"12":496000,"13":502000,"14":508000,"15":514000,"16":521000,"17":528000,"18":535000,"19":542000,"20":549000,"21":557000,"22":565000,"23":573000,"24":581000,"25":590000,"26":598000,"27":608000,"28":617000,"29":627000,"30":637000,"31":647000,"32":658000,"33":669000,"34":681000,"35":693000,"36":705000,"37":718000,"38":732000,"39":746000,"40":760000,"41":775000,"42":791000,"43":808000,"44":825000,"45":843000,"46":861000,"47":881000,"48":901000,"49":923000,"50":945000,"51":969000,"52":993000,"53":1019000,"54":1047000,"55":1076000},"3218":{"0":468009,"1":473007,"2":478007,"3":483007,"4":488009,"5":494002,"6":500000,"7":505000,"8":511000,"9":517000,"10":523000,"11":529000,"12":535000,"13":542000,"14":549000,"15":556000,"16":563000,"17":570000,"18":577000,"19":585000,"20":593000,"21":601000,"22":610000,"23":618000,"24":627000,"25":637000,"26":646000,"27":656000,"28":666000,"29":677000,"30":688000,"31":699000,"32":710000,"33":722000,"34":735000,"35":748000,"36":761000,"37":775000,"38":790000,"39":805000,"40":820000,"41":836000,"42":853000,"43":871000,"44":889000,"45":908000,"46":929000,"47":949000,"48":971000,"49":994000,"50":1018000,"51":1044000,"52":1070000,"53":1098000,"54":1128000,"55":1159000},"5000":{"0":757000,"1":765000,"2":773000,"3":781000,"4":789000,"5":798000,"6":806000,"7":815000,"8":824000,"9":834000,"10":843000,"11":853000,"12":863000,"13":873000,"14":884000,"15":895000,"16":906000,"17":918000,"18":929000,"19":942000,"20":954000,"21":967000,"22":980000,"23":994000,"24":1008000,"25":1023000,"26":1037000,"27":1053000,"28":1069000,"29":1085000,"30":1102000,"31":1120000,"32":1138000,"33":1157000,"34":1176000,"35":1197000,"36":1218000,"37":1239000,"38":1262000,"39":1285000,"40":1310000,"41":1335000,"42":1361000,"43":1389000,"44":1418000,"45":1448000,"46":1479000,"47":1512000,"48":1546000,"49":1582000,"50":1620000,"51":1659000,"52":1701000,"53":1745000,"54":1791000,"55":1840000},"8000":{"0":1250000,"1":1262000,"2":1276000,"3":1289000,"4":1302000,"5":1316000,"6":1330000,"7":1344000,"8":1359000,"9":1375000,"10":1390000,"11":1406000,"12":1422000,"13":1439000,"14":1456000,"15":1474000,"16":1492000,"17":1511000,"18":1530000,"19":1550000,"20":1570000,"21":1592000,"22":1613000,"23":1635000,"24":1658000,"25":1682000,"26":1706000,"27":1732000,"28":1758000,"29":1785000,"30":1812000,"31":1841000,"32":1871000,"33":1902000,"34":1934000,"35":1967000,"36":2002000,"37":2038000,"38":2074000,"39":2113000,"40":2154000,"41":2195000,"42":2239000,"43":2284000,"44":2332000,"45":2381000,"46":2433000,"47":2487000,"48":2544000,"49":2603000,"50":2666000,"51":2731000,"52":2801000,"53":2874000,"54":2950000,"55":3032000},"8045":{"0":1258000,"1":1270000,"2":1284000,"3":1297000,"4":1310000,"5":1324000,"6":1338000,"7":1352000,"8":1368000,"9":1383000,"10":1398000,"11":1414000,"12":1431000,"13":1448000,"14":1465000,"15":1483000,"16":1501000,"17":1520000,"18":1540000,"19":1559000,"20":1580000,"21":1601000,"22":1623000,"23":1645000,"24":1669000,"25":1693000,"26":1716000,"27":1742000,"28":1769000,"29":1795000,"30":1823000,"31":1852000,"32":1883000,"33":1914000,"34":1946000,"35":1979000,"36":2014000,"37":2050000,"38":2087000,"39":2126000,"40":2167000,"41":2209000,"42":2252000,"43":2298000,"44":2346000,"45":2396000,"46":2448000,"47":2502000,"48":2559000,"49":2619000,"50":2682000,"51":2748000,"52":2818000,"53":2891000,"54":2968000,"55":3050000},"10000":{"0":1579000,"1":1594000,"2":1611000,"3":1627000,"4":1644000,"5":1661000,"6":1679000,"7":1697000,"8":1716000,"9":1735000,"10":1754000,"11":1774000,"12":1795000,"13":1816000,"14":1838000,"15":1860000,"16":1883000,"17":1906000,"18":1931000,"19":1955000,"20":1981000,"21":2008000,"22":2035000,"23":2063000,"24":2092000,"25":2122000,"26":2152000,"27":2184000,"28":2217000,"29":2251000,"30":2286000,"31":2322000,"32":2360000,"33":2399000,"34":2439000,"35":2481000,"36":2524000,"37":2570000,"38":2616000,"39":2665000,"40":2716000,"41":2769000,"42":2824000,"43":2881000,"44":2941000,"45":3003000,"46":3069000,"47":3137000,"48":3209000,"49":3284000,"50":3363000,"51":3446000,"52":3534000,"53":3626000,"54":3723000,"55":3826000},"15000":{"0":2417000,"1":2442000,"2":2466000,"3":2492000,"4":2518000,"5":2545000,"6":2572000,"7":2600000,"8":2629000,"9":2658000,"10":2688000,"11":2719000,"12":2751000,"13":2784000,"14":2818000,"15":2852000,"16":2888000,"17":2924000,"18":2962000,"19":3000000,"20":3040000,"21":3081000,"22":3123000,"23":3167000,"24":3212000,"25":3258000,"26":3306000,"27":3355000,"28":3406000,"29":3459000,"30":3513000,"31":3570000,"32":3628000,"33":3689000,"34":3751000,"35":3816000,"36":3884000,"37":3953000,"38":4026000,"39":4102000,"40":4180000,"41":4262000,"42":4347000,"43":4436000,"44":4529000,"45":4626000,"46":4727000,"47":4833000,"48":4944000,"49":5060000,"50":5182000,"51":5310000,"52":5445000,"53":5587000,"54":5736000,"55":5894000},"16090":{"0":2606000,"1":2633000,"2":2659000,"3":2687000,"4":2715000,"5":2744000,"6":2773000,"7":2804000,"8":2835000,"9":2866000,"10":2899000,"11":2932000,"12":2967000,"13":3002000,"14":3039000,"15":3076000,"16":3115000,"17":3154000,"18":3195000,"19":3236000,"20":3279000,"21":3323000,"22":3369000,"23":3416000,"24":3465000,"25":3515000,"26":3566000,"27":3620000,"28":3674000,"29":3732000,"30":3790000,"31":3852000,"32":3914000,"33":3980000,"34":4047000,"35":4117000,"36":4190000,"37":4265000,"38":4344000,"39":4426000,"40":4510000,"41":4598000,"42":4690000,"43":4786000,"44":4886000,"45":4991000,"46":5099000,"47":5214000,"48":5333000,"49":5458000,"50":5589000,"51":5727000,"52":5872000,"53":6025000,"54":6185000,"55":6355000},"20000":{"0":3280000,"1":3314000,"2":3348000,"3":3383000,"4":3418000,"5":3454000,"6":3492000,"7":3531000,"8":3570000,"9":3610000,"10":3652000,"11":3694000,"12":3737000,"13":3783000,"14":3829000,"15":3876000,"16":3924000,"17":3974000,"18":4026000,"19":4079000,"20":4133000,"21":4190000,"22":4247000,"23":4307000,"24":4368000,"25":4431000,"26":4497000,"27":4565000,"28":4634000,"29":4706000,"30":4780000,"31":4857000,"32":4937000,"33":5019000,"34":5105000,"35":5193000,"36":5285000,"37":5380000,"38":5479000,"39":5582000,"40":5689000,"41":5800000,"42":5916000,"43":6036000,"44":6162000,"45":6293000,"46":6430000,"47":6573000,"48":6723000,"49":6880000,"50":7044000,"51":7217000,"52":7398000,"53":7589000,"54":7790000,"55":8001000},"210975":{"0":3470000,"1":3505000,"2":3541000,"3":3578000,"4":3615000,"5":3654000,"6":3694000,"7":3735000,"8":3776000,"9":3819000,"10":3863000,"11":3908000,"12":3954000,"13":4002000,"14":4051000,"15":4101000,"16":4152000,"17":4205000,"18":4260000,"19":4316000,"20":4373000,"21":4433000,"22":4494000,"23":4557000,"24":4622000,"25":4689000,"26":4758000,"27":4830000,"28":4903000,"29":4980000,"30":5058000,"31":5140000,"32":5224000,"33":5311000,"34":5402000,"35":5495000,"36":5592000,"37":5693000,"38":5798000,"39":5907000,"40":6020000,"41":6137000,"42":6260000,"43":6387000,"44":6520000,"45":6659000,"46":6804000,"47":6955000,"48":7114000,"49":7279000,"50":7453000,"51":7636000,"52":7827000,"53":8029000,"54":8241000,"55":8464000},"25000":{"0":4173000,"1":4215000,"2":4259000,"3":4303000,"4":4348000,"5":4395000,"6":4443000,"7":4492000,"8":4541000,"9":4593000,"10":4646000,"11":4700000,"12":4755000,"13":4813000,"14":4871000,"15":4931000,"16":4993000,"17":5056000,"18":5122000,"19":5189000,"20":5258000,"21":5329000,"22":5402000,"23":5478000,"24":5555000,"25":5635000,"26":5718000,"27":5804000,"28":5891000,"29":5983000,"30":6076000,"31":6173000,"32":6274000,"33":6377000,"34":6485000,"35":6596000,"36":6712000,"37":6832000,"38":6956000,"39":7086000,"40":7220000,"41":7359000,"42":7505000,"43":7655000,"44":7813000,"45":7977000,"46":8149000,"47":8328000,"48":8515000,"49":8711000,"50":8916000,"51":9132000,"52":9358000,"53":9596000,"54":9846000,"55":10109000},"30000":{"0":5073000,"1":5125000,"2":5178000,"3":5232000,"4":5287000,"5":5344000,"6":5402000,"7":5462000,"8":5522000,"9":5585000,"10":5649000,"11":5714000,"12":5782000,"13":5851000,"14":5922000,"15":5995000,"16":6070000,"17":6147000,"18":6226000,"19":6308000,"20":6391000,"21":6477000,"22":6566000,"23":6657000,"24":6751000,"25":6848000,"26":6948000,"27":7051000,"28":7157000,"29":7267000,"30":7380000,"31":7498000,"32":7619000,"33":7744000,"34":7873000,"35":8007000,"36":8147000,"37":8291000,"38":8440000,"39":8596000,"40":8757000,"41":8925000,"42":9099000,"43":9280000,"44":9469000,"45":9666000,"46":9872000,"47":10086000,"48":10311000,"49":10545000,"50":10791000,"51":11048000,"52":11319000,"53":11603000,"54":11902000,"55":12217000},"421950":{"0":7270000,"1":7344000,"2":7420000,"3":7497000,"4":7577000,"5":7658000,"6":7742000,"7":7827000,"8":7914000,"9":8003000,"10":8095000,"11":8189000,"12":8285000,"13":8384000,"14":8486000,"15":8590000,"16":8697000,"17":8807000,"18":8920000,"19":9036000,"20":9155000,"21":9278000,"22":9404000,"23":9534000,"24":9668000,"25":9805000,"26":9947000,"27":10094000,"28":10245000,"29":10400000,"30":10561000,"31":10727000,"32":10899000,"33":11076000,"34":11259000,"35":11449000,"36":11646000,"37":11849000,"38":12060000,"39":12279000,"40":12506000,"41":12743000,"42":12988000,"43":13243000,"44":13509000,"45":13785000,"46":14074000,"47":14375000,"48":14690000,"49":15019000,"50":15363000,"51":15723000,"52":16102000,"53":16499000,"54":16917000,"55":17357000}}

Number.prototype.pad = function(size) {
  var s = String(this);
  while (s.length < (size || 2)) {s = "0" + s;}
  return s;
}

String.prototype.toDuration = function() {
  let tmp = this;
  let hr = Math.floor(tmp / (1000 * 60 * 60)).pad(2);
  tmp -= hr * (1000 * 60 * 60);
  let min = Math.floor(tmp / (1000 * 60)).pad(2);
  tmp -= min * 1000 * 60;
  let s = Math.floor(tmp / 1000).pad(2);
  tmp -= s * 1000;
  let ms = tmp.pad(2);
  return `${hr}:${min}:${s}.${ms}`
};

// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};

var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl)
})

function updateVdotLabel(value) {
  document.getElementById("vdot-number").value = value
  updateRaceTable(value);
  updateTrainingPaces(value);
  window.localStorage.setItem("vdot", value)
}

function updateRaceTable(vdot) {
  let idx = 85 - vdot;
  let val = races["VDOT"][idx.toString()]
  if (vdot != val) {
    console.log("error...bad index")
    return;
  }
  let keys = Object.keys(races)
  for (key of keys) {
    if (key == "VDOT") {
      continue;
    }
    document.getElementById("calc-race-pred-" + key).innerText = String(races[key][idx]).toDuration()
  }

}

function updateTrainingPaces(vdot) {
  updateTrainingPace(vdot, "E", ["km", "mile"]);
  updateTrainingPace(vdot, "M", ["km", "mile"]);
  updateTrainingPace(vdot, "T", ["400", "800", "1000", "mile"]);
  updateTrainingPace(vdot, "I", ["400", "1000", "1200", "mile"]);
  updateTrainingPace(vdot, "R", ["200", "300", "400", "600", "800"]);
}

function updateTrainingPace(vdot, pace, distances) {
  let idx = vdot - 30;
  for (distance of distances) {
    let suffix = pace + "-" + distance;
    let val = paces[pace + "/" + distance][idx];
    if (val == null) {
      val = "N/A"
    } else {
      val = String(val).toDuration()
    }
    document.getElementById("calc-pace-" + suffix).innerText = val
  }
}

function setVdotRange(vdot) {
  let element = document.getElementById("vdot-range");
  element.value = vdot;
  element.dispatchEvent(new Event('change'))
}

function parseTime(value) {
  let vals = String(value).split(":")
  let n = vals.length;
  let secsAndMs = String(vals[n-1]).split(".");
  let totalTime = 0;
  let secs = secsAndMs[0]
  if (secsAndMs.length > 1) {
    totalTime += parseInt(secsAndMs[1]);
  }
  totalTime += parseInt(secs * 1000)
  if (n > 1) {
    let min = vals[n-2];
    totalTime += 60 * 1000 * parseInt(min)
  }
  if (n > 2) {
    let hr = vals[n-3];
    totalTime += 60* 60 * 1000 * parseInt(hr)
  }
  return totalTime;
}

function doRaceSearch() {
  debounce(loadVdotsForRaceTime, 250, false)
}

function loadVdotsForRaceTime() {
  let time = document.getElementById("time")
  let race = document.getElementById("race").value
  let trueTime = parseTime(time.value)
  let raceTimes = races[race];
  let idx = Object.keys(raceTimes).reduce(closestReducer(trueTime, raceTimes))
  setVdotRange(races["VDOT"][idx]);
}

function closestReducer(value, raceTimes) {
  return function(prev, current) {
    let prevDiff = Math.abs(value - raceTimes[prev]);
    let currDiff = Math.abs(value - raceTimes[current]);
    if (currDiff < prevDiff) {
      return current;
    } else {
      return prev;
    }
  }
}

window.onload = (e) => {
  let val = window.localStorage.getItem("vdot")
  if (val == null) {
    val = 57;
  }
  setVdotRange(val);
}
